(function(){"use strict";var e={3375:function(e,a,l){var t=l(9242),r=l(3396);const o=(0,r._)("h1",{align:"center"},"用户管理",-1);function n(e,a,l,t,n,u){const d=(0,r.up)("TableList");return(0,r.wg)(),(0,r.iD)(r.HY,null,[o,(0,r.Wm)(d)],64)}var u=l(7139);const d={class:"dialog-footer"};function i(e,a,l,t,o,n){const i=(0,r.up)("el-button"),s=(0,r.up)("el-col"),c=(0,r.up)("el-input"),p=(0,r.up)("el-row"),m=(0,r.up)("el-table-column"),f=(0,r.up)("el-table"),g=(0,r.up)("el-pagination"),h=(0,r.up)("el-form-item"),w=(0,r.up)("el-option"),v=(0,r.up)("el-select"),y=(0,r.up)("el-space"),C=(0,r.up)("el-cascader"),b=(0,r.up)("el-form"),W=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{span:2},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{size:"default",type:"primary",onClick:t.showCreateDialog},{default:(0,r.w5)((()=>[(0,r.Uk)("新建")])),_:1},8,["onClick"])])),_:1}),(0,r.Wm)(s,{span:4},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{placeholder:"按关键字搜索",modelValue:t.queryParams.query,"onUpdate:modelValue":a[0]||(a[0]=e=>t.queryParams.query=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(s,{span:2},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{size:"default",type:"primary",onClick:t.handleSearch},{default:(0,r.w5)((()=>[(0,r.Uk)("搜索")])),_:1},8,["onClick"])])),_:1}),(0,r.Wm)(s,{span:2},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{onClick:a[1]||(a[1]=e=>t.undo()),size:"default",type:"warning",style:{position:"absolute",right:"20px"}},{default:(0,r.w5)((()=>[(0,r.Uk)("撤销")])),_:1})])),_:1})])),_:1}),(0,r.Wm)(f,{ref:"multipleTable",data:t.users.records,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:t.handleSelectionChange},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"selection",width:"55"}),(0,r.Wm)(m,{label:"姓名",width:"120",prop:"name"}),(0,r.Wm)(m,{label:"年龄",width:"120",prop:"age"}),(0,r.Wm)(m,{label:"性别",width:"120",prop:"sex"}),(0,r.Wm)(m,{label:"联系电话",width:"120",prop:"telephone"}),(0,r.Wm)(m,{label:"详细地址"},{default:(0,r.w5)((({row:e})=>[(0,r.Uk)((0,u.zw)(e.provinceName)+"/"+(0,u.zw)(e.cityName)+"/"+(0,u.zw)(e.areaName)+"/"+(0,u.zw)(e.address),1)])),_:1}),(0,r.Wm)(m,{label:"操作",width:"140"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(i,{onClick:a=>t.showEditDialog(e),size:"small",type:"primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("编辑")])),_:2},1032,["onClick"]),(0,r.Wm)(i,{onClick:a=>t.handleDelete(e),size:"small",type:"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"danger",size:"default",onClick:t.removeBatch},{default:(0,r.w5)((()=>[(0,r.Uk)("批量删除")])),_:1},8,["onClick"])])),_:1}),(0,r.Wm)(s,{style:{position:"absolute",right:"20px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{small:"",layout:"prev, pager, next",total:t.users.total,"page-size":t.queryParams.size,"current-page":t.queryParams.current,onCurrentChange:t.handleCurrentChange},null,8,["total","page-size","current-page","onCurrentChange"])])),_:1})])),_:1}),(0,r.Wm)(W,{modelValue:t.userformDialogVisible,"onUpdate:modelValue":a[8]||(a[8]=e=>t.userformDialogVisible=e),title:"新建/编辑用户",width:"750px"},{footer:(0,r.w5)((()=>[(0,r._)("span",d,[(0,r.Wm)(i,{onClick:t.handleCancel},{default:(0,r.w5)((()=>[(0,r.Uk)("取消")])),_:1},8,["onClick"]),(0,r.Wm)(i,{type:"primary",onClick:t.handleSave},{default:(0,r.w5)((()=>[(0,r.Uk)(" 保存 ")])),_:1},8,["onClick"])])])),default:(0,r.w5)((()=>[(0,r.Wm)(b,{model:t.user,rules:t.formRefRules,ref:"formRef"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{size:50},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{label:"姓名",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:t.user.name,"onUpdate:modelValue":a[2]||(a[2]=e=>t.user.name=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,r.Wm)(h,{label:"性别",prop:"sex"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{modelValue:t.user.sex,"onUpdate:modelValue":a[3]||(a[3]=e=>t.user.sex=e),placeholder:"请选择性别",style:{width:"300px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{label:"男",value:"男"}),(0,r.Wm)(w,{label:"女",value:"女"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,r.Wm)(y,{size:50},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{label:"年龄",prop:"age"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:t.user.age,"onUpdate:modelValue":a[4]||(a[4]=e=>t.user.age=e),modelModifiers:{number:!0},autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1}),(0,r.Wm)(h,{label:"电话",prop:"telephone"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:t.user.telephone,"onUpdate:modelValue":a[5]||(a[5]=e=>t.user.telephone=e),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,r.Wm)(y,{size:30},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{label:"地址",prop:"valueOfSelected"},{default:(0,r.w5)((()=>[(0,r.Wm)(C,{ref:"cascader",modelValue:t.user.valueOfSelected,"onUpdate:modelValue":a[6]||(a[6]=e=>t.user.valueOfSelected=e),options:t.options,props:t.props,onChange:t.handleChange,style:{width:"300px"}},null,8,["modelValue","options","props","onChange"])])),_:1}),(0,r.Wm)(h,{prop:"address"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:t.user.address,"onUpdate:modelValue":a[7]||(a[7]=e=>t.user.address=e),autocomplete:"off",placeholder:"请输入详细地址",style:{width:"350px"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}var s=l(4870),c=l(4161);const p="http://users.hpnu.cn:28080",m=c.Z.create({baseURL:p}),f=e=>m.post("/user/list",e),g=e=>m.get(`/user/${e}`),h=e=>m.put("user",e),w=e=>m.post("user",e),v=e=>m.delete(`/user/${e}`),y=()=>m.get("/undo"),C=e=>m.post("/user/remove/batch",e),b=()=>m.get("district/all");var W={name:"TableList",setup(){let e=(0,s.iH)(!1),a=(0,s.iH)([]),l=(0,s.iH)([]),t=(0,s.qj)({id:"",name:"",age:0,sex:"",telephone:"",provinceCode:"",provinceName:"",cityCode:"",cityName:"",areaCode:"",areaName:"",address:"",valueOfSelected:[]});const o=(0,s.iH)(),n=(0,s.iH)(),u=(e,a,l)=>{a.length<3?l(new Error("请选择完整的省市区")):l()},d=(0,s.iH)({name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{type:"number",message:"年龄必须为数字值",trigger:"blur"}],telephone:[{required:!0,message:"请输入电话号码",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"电话号码格式不正确",trigger:"blur"}],valueOfSelected:[{required:!0,message:"请选择省市区",trigger:"blur"},{validator:u,trigger:"change"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]}),i=(0,s.qj)({records:[],total:0,size:0,current:0,pages:0}),c=(0,s.qj)({query:"",current:1,size:5}),p={value:"code",label:"name"},m=async()=>{const e=await f(c);i.records=e.data.records,i.total=e.data.total,i.size=e.data.size,i.current=e.data.current,i.pages=e.data.pages},W=e=>{c.current=e,m()},_=async e=>{await v(e.id),m()},k=()=>{m()},V=async()=>{await y(),m()},x=e=>{const l=Array.from(e,(({id:e})=>e));a=l},O=async()=>{await C(a),m()},z=async()=>{S(),e.value=!0},N=async a=>{const l=await g(a.id);t.id=l.data.id,t.name=l.data.name,t.age=l.data.age,t.sex=l.data.sex,t.telephone=l.data.telephone,t.provinceCode=l.data.provinceCode,t.provinceName=l.data.provinceName,t.cityCode=l.data.cityCode,t.cityName=l.data.cityName,t.areaCode=l.data.areaCode,t.areaName=l.data.areaName,t.address=l.data.address,t.valueOfSelected=[],t.valueOfSelected[0]=t.provinceCode,t.valueOfSelected[1]=t.cityCode,t.valueOfSelected[2]=t.areaCode,e.value=!0},S=()=>{t.id="",t.name="",t.age=null,t.sex="",t.telephone="",t.provinceCode="",t.provinceName="",t.cityCode="",t.cityName="",t.areaCode="",t.areaName="",t.address="",t.valueOfSelected=[]},U=()=>{e.value=!1},q=async()=>{const a=await n.value.validate();if(!a)return!1;e.value=!1,delete t.valueOfSelected,""==t.id?await w(t):await h(t),m()},D=e=>{t.provinceCode=e[0],t.cityCode=e[1],t.areaCode=e[2];const a=o.value.getCheckedNodes()[0].pathLabels;t.provinceName=a[0],t.cityName=a[1],t.areaName=a[2]};return(0,r.bv)((async()=>{m();const e=await b();l.value=e.data})),{users:i,queryParams:c,userformDialogVisible:e,user:t,options:l,props:p,cascader:o,formRef:n,formRefRules:d,handleDelete:_,handleCurrentChange:W,handleSearch:k,handleSelectionChange:x,handleSave:q,handleChange:D,handleCancel:U,undo:V,removeBatch:O,showCreateDialog:z,showEditDialog:N}}},_=l(89);const k=(0,_.Z)(W,[["render",i]]);var V=k,x={name:"App",components:{TableList:V}};const O=(0,_.Z)(x,[["render",n]]);var z=O,N=(l(4415),l(9697));const S=(0,t.ri)(z);S.use(N.Z),S.mount("#app")}},a={};function l(t){var r=a[t];if(void 0!==r)return r.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,l),o.exports}l.m=e,function(){var e=[];l.O=function(a,t,r,o){if(!t){var n=1/0;for(s=0;s<e.length;s++){t=e[s][0],r=e[s][1],o=e[s][2];for(var u=!0,d=0;d<t.length;d++)(!1&o||n>=o)&&Object.keys(l.O).every((function(e){return l.O[e](t[d])}))?t.splice(d--,1):(u=!1,o<n&&(n=o));if(u){e.splice(s--,1);var i=r();void 0!==i&&(a=i)}}return a}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[t,r,o]}}(),function(){l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,{a:a}),a}}(),function(){l.d=function(e,a){for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={143:0};l.O.j=function(a){return 0===e[a]};var a=function(a,t){var r,o,n=t[0],u=t[1],d=t[2],i=0;if(n.some((function(a){return 0!==e[a]}))){for(r in u)l.o(u,r)&&(l.m[r]=u[r]);if(d)var s=d(l)}for(a&&a(t);i<n.length;i++)o=n[i],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(s)},t=self["webpackChunkuser_manage_front"]=self["webpackChunkuser_manage_front"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=l.O(void 0,[998],(function(){return l(3375)}));t=l.O(t)})();
//# sourceMappingURL=app.0833379c.js.map